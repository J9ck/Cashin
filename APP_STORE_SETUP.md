# App Store Deployment Guide

This guide provides instructions for preparing Cashin' for App Store submission and configuring analytics.

## Prerequisites

- Xcode 15.0 or later
- Apple Developer Account (Individual or Organization)
- macOS with admin privileges

## 1. App Store Configuration

### Bundle Identifier
The app is configured with bundle identifier: `com.j9ck.cashin`

You may need to update this in your Xcode project to match your Apple Developer account's App ID.

### Version Information
- **Version**: 1.0 (CFBundleShortVersionString)
- **Build Number**: 1 (CFBundleVersion)

Increment these values for each App Store submission.

### Entitlements
The app includes `Cashin.entitlements` file with the following capabilities:
- Push Notifications (production environment)
- Time-sensitive notifications
- App Groups: `group.com.j9ck.cashin`
- iCloud (CloudKit): `iCloud.com.j9ck.cashin`
- Key-value storage

**Important**: Update the bundle identifier in the entitlements file if you change it in the project settings.

## 2. Privacy Permissions

The app requests the following permissions (configured in Info.plist):

### Required Permissions
- **NSUserNotificationsUsageDescription**: For daily spending reminders
  - Current: "Cashin' sends daily reminders to help you track your spending."

### Optional Permissions (Not Currently Included)
The following permissions can be added when implementing future features:
- **NSCameraUsageDescription**: For capturing receipts (when receipt scanning feature is added)
- **NSPhotoLibraryAddUsageDescription**: For saving receipt images (when receipt feature is added)
- **NSPhotoLibraryUsageDescription**: For attaching receipt images to transactions (when receipt feature is added)
- **NSLocationWhenInUseUsageDescription**: For location-based transaction insights (when location feature is added)
- **NSCalendarsUsageDescription**: For scheduling financial events (when calendar integration is added)

**Important**: Only request permissions that your app actually uses. Apple may reject apps that request unnecessary permissions. Add these descriptions only when you implement the corresponding features.

## 3. App Icons and Assets

### App Icon Requirements
- Location: `Resources/Assets.xcassets/AppIcon.appiconset/`
- Required size: 1024x1024 pixels (App Store)
- Additional sizes for device display (automatically generated by Xcode)

**Action Required**: Add your app icon in PNG format to the AppIcon.appiconset directory. Ensure it meets Apple's design guidelines:
- No alpha channel
- No rounded corners (iOS adds them automatically)
- Follows Apple's Human Interface Guidelines

### Launch Screen
The app uses a programmatic launch screen with:
- Background Color: LaunchScreenBackground (dark gray #1C1C1E)
- Optional icon: LaunchIcon (needs to be added to Assets)

**Action Required**: Add a simple launch icon if desired, or the app will launch with just the background color.

## 4. Analytics and Crash Reporting

### Analytics Manager
The app includes `AnalyticsManager.swift` with placeholder implementation for:
- Event tracking
- Screen view tracking
- User properties
- Transaction analytics

### Firebase Setup (Optional)

If you want to use Firebase Analytics:

1. **Create Firebase Project**
   - Go to [Firebase Console](https://console.firebase.google.com)
   - Create a new project
   - Register your iOS app with bundle identifier

2. **Add Firebase SDK**
   ```swift
   // Add to your Swift Package Manager dependencies
   https://github.com/firebase/firebase-ios-sdk
   ```
   Or use CocoaPods:
   ```ruby
   pod 'Firebase/Analytics'
   pod 'Firebase/Crashlytics'
   ```

3. **Download GoogleService-Info.plist**
   - Download from Firebase Console
   - Add to project root (same level as Info.plist)
   - Ensure it's included in the app target

4. **Initialize in CashinApp.swift**
   ```swift
   import Firebase
   
   init() {
       FirebaseApp.configure()
       AnalyticsManager.shared.configure()
   }
   ```

5. **Update AnalyticsManager.swift**
   - Uncomment Firebase-specific code
   - Replace print statements with actual Firebase calls

### Apple App Analytics (Alternative)

To use Apple's built-in analytics:
1. No code changes required
2. View analytics in App Store Connect
3. Basic metrics provided automatically

## 5. Code Signing and Provisioning

### Development
- Ensure your Apple Developer account is added to Xcode
- Let Xcode manage signing automatically (recommended for development)

### Distribution
1. **Create App ID** in Apple Developer Portal
   - Identifier: com.j9ck.cashin (or your custom identifier)
   - Enable capabilities: Push Notifications, iCloud, App Groups

2. **Create Distribution Certificate**
   - iOS Distribution certificate
   - Install in Keychain

3. **Create App Store Provisioning Profile**
   - Type: App Store
   - Include your Distribution certificate
   - Download and install

4. **Xcode Configuration**
   - Select your team in Signing & Capabilities
   - Choose "Manual" signing for release builds
   - Select the correct provisioning profile

## 6. App Store Connect Setup

1. **Create App Record**
   - Log in to [App Store Connect](https://appstoreconnect.apple.com)
   - Create new app with matching bundle identifier
   - Fill in app metadata:
     - App Name: Cashin'
     - Subtitle: Daily Financial Tracker
     - Primary Language: English
     - Category: Finance
     - Content Rights: (based on your preference)

2. **App Information**
   - Privacy Policy URL (required for finance apps)
   - Support URL
   - Marketing URL (optional)

3. **Pricing and Availability**
   - Select countries
   - Set pricing (free or paid)

4. **App Privacy**
   - Data Types Collected: Financial information, usage data
   - Data Use: Analytics, app functionality
   - Provide detailed privacy responses

## 7. Build and Archive

### Archive for Distribution
```bash
# Clean build
xcodebuild clean -scheme Cashin

# Archive
xcodebuild archive \
  -scheme Cashin \
  -archivePath ./build/Cashin.xcarchive \
  -configuration Release

# Export IPA
xcodebuild -exportArchive \
  -archivePath ./build/Cashin.xcarchive \
  -exportPath ./build \
  -exportOptionsPlist ExportOptions.plist
```

### Using Xcode UI
1. Product > Archive
2. Wait for archive to complete
3. In Organizer, select archive
4. Click "Distribute App"
5. Choose "App Store Connect"
6. Upload to Apple

## 8. App Store Review Preparation

### Test Flight
- Upload build to App Store Connect
- Enable Test Flight testing
- Test on multiple devices
- Gather feedback from beta testers

### Review Checklist
- [ ] All features work correctly
- [ ] No crashes or major bugs
- [ ] Privacy policy in place
- [ ] All permissions have clear justifications
- [ ] Screenshots prepared (all required device sizes)
- [ ] App description written
- [ ] Keywords optimized
- [ ] Age rating appropriate
- [ ] Export compliance answered
- [ ] Content rights declared

### Screenshots Required
- iPhone 6.7" (iPhone 14 Pro Max)
- iPhone 6.5" (iPhone 11 Pro Max)
- iPhone 5.5" (iPhone 8 Plus)
- iPad Pro 12.9" (optional but recommended)

### App Preview Video (Optional)
- 15-30 seconds
- Demonstrates core functionality
- No audio required

## 9. Compliance and Legal

### Export Compliance
The app sets `ITSAppUsesNonExemptEncryption` to `false` in Info.plist, indicating it doesn't use encryption beyond standard iOS encryption.

If you add additional encryption (e.g., custom data encryption), update this value and provide export documentation.

### Privacy Policy
Required for finance apps. Include:
- What data is collected
- How data is used
- Where data is stored
- How users can delete their data
- Third-party services used (if any)

### Terms of Service
Recommended but not always required. Include:
- User responsibilities
- Limitation of liability
- Dispute resolution
- Intellectual property rights

## 10. Post-Launch

### Monitoring
- Monitor crash reports in App Store Connect
- Check analytics regularly
- Respond to user reviews
- Track app performance metrics

### Updates
- Plan regular updates
- Fix critical bugs quickly
- Add new features based on feedback
- Keep iOS SDK up to date

## Troubleshooting

### Common Issues

**Build fails with signing error**
- Verify team is selected in Xcode
- Check provisioning profile is valid
- Ensure certificates are installed

**Upload rejected**
- Check minimum iOS version (17.0)
- Verify all required metadata is complete
- Review error message in App Store Connect

**App rejected during review**
- Read rejection reason carefully
- Fix issues mentioned
- Respond in Resolution Center
- Resubmit

## Support

For additional help:
- [Apple Developer Documentation](https://developer.apple.com/documentation/)
- [App Store Review Guidelines](https://developer.apple.com/app-store/review/guidelines/)
- [Human Interface Guidelines](https://developer.apple.com/design/human-interface-guidelines/)

## Version History

- v1.0 (Initial Release)
  - Daily balance tracking
  - Transaction management
  - 7-day history with charts
  - Earnings tracking
  - Daily reminders
